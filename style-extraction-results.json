[
  {
    "original": "client/public/index.html",
    "css": "client\\public\\css\\index.css",
    "backup": "client/public/index.html.original",
    "styleSize": 16279,
    "modified": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <!-- Add security headers -->\r\n    <meta http-equiv=\"X-Content-Type-Options\" content=\"nosniff\">\r\n    <meta http-equiv=\"X-Frame-Options\" content=\"DENY\">\r\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' http://localhost:5000;\">\r\n    <meta name=\"description\" content=\"Nocturnal - A modern healthcare staffing platform connecting professionals with facilities\">\r\n    <meta name=\"keywords\" content=\"healthcare, staffing, medical professionals, nurses, doctors\">\r\n    <meta name=\"robots\" content=\"index, follow\">\r\n    <title>Nocturnal - Healthcare Staffing Platform</title>\r\n    <link rel=\"stylesheet\" href=\"css/index.css\">\r\n</head>\r\n<body>\r\n    <!-- Navigation -->\r\n    <nav>\r\n        <div class=\"nav-container\">\r\n            <div class=\"logo\">\r\n                <span class=\"logo-icon\">üåô</span>\r\n                <span>Nocturnal</span>\r\n            </div>\r\n            <div class=\"nav-buttons\">\r\n                <button class=\"btn btn-outline\" onclick=\"openLoginModal()\">Login</button>\r\n                <button class=\"btn btn-primary\" onclick=\"openRegisterModal()\">Get Started</button>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n\r\n    <!-- Hero Section -->\r\n    <section class=\"hero\">\r\n        <div class=\"hero-content\">\r\n            <h1>it's time for something better</h1>\r\n\r\n            <div class=\"benefits-grid\">\r\n                <div class=\"benefits-column\">\r\n                    <h3>For Healthcare Professionals</h3>\r\n                    <ul>\r\n                        <li>be your own boss & take back control</li>\r\n                        <li>set your rates, preferences & choose the shifts that suit you</li>\r\n                        <li>say goodbye to time-consuming admin, paper timesheets & agency mistakes</li>\r\n                    </ul>\r\n                </div>\r\n                <div class=\"benefits-column\">\r\n                    <h3>For Healthcare Facilities</h3>\r\n                    <ul>\r\n                        <li>keep your digital profile & compliance up-to-date and secure</li>\r\n                        <li>one-click apply to hundreds of shifts across the country</li>\r\n                        <li>get paid on time, every time - timesheets submitted, tracked & approved online</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"mission-statement\">\r\n                <p>Our online marketplace directly connects primary and urgent care professionals with service providers and shifts without the need for recruitment agencies.</p>\r\n                <p>We give power back to healthcare professionals by cutting out recruiters and exploitative agency fees.</p>\r\n            </div>\r\n\r\n            <div class=\"cta-button\">\r\n                <button class=\"btn btn-primary btn-lg\" onclick=\"openRegisterModal()\" style=\"font-size: 1.1rem; padding: 15px 40px;\">find out more</button>\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\n    <!-- How It Works Section -->\r\n    <section class=\"how-it-works\">\r\n        <h2>how it works</h2>\r\n        <div class=\"steps-container\">\r\n            <div class=\"step\">\r\n                <div class=\"step-icon\">üë§</div>\r\n                <h3>Create Your Profile</h3>\r\n                <p>Sign up and build your professional profile with your experience, skills and credentials</p>\r\n            </div>\r\n            <div class=\"step\">\r\n                <div class=\"step-icon\">üì±</div>\r\n                <h3>Browse & Apply</h3>\r\n                <p>Find shifts that match your preferences and apply with just one click</p>\r\n            </div>\r\n            <div class=\"step\">\r\n                <div class=\"step-icon\">üíº</div>\r\n                <h3>Get Hired</h3>\r\n                <p>Facilities review your profile and accept your application for the perfect match</p>\r\n            </div>\r\n            <div class=\"step\">\r\n                <div class=\"step-icon\">üí∞</div>\r\n                <h3>Get Paid</h3>\r\n                <p>Complete your shift and receive payment directly - no middleman, no delays</p>\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\n    <!-- Features Section -->\r\n    <section class=\"features\">\r\n        <div class=\"features-container\">\r\n            <div class=\"feature-block\">\r\n                <div class=\"feature-content\">\r\n                    <h3>Sing your own praises.</h3>\r\n                    <p>Tell service providers about your experience, skills and professional interests directly, with no unnecessary middle-man.</p>\r\n                </div>\r\n                <div class=\"feature-visual\">\r\n                    <div class=\"feature-visual-content\">üìã</div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"feature-block\" style=\"direction: rtl;\">\r\n                <div class=\"feature-content\" style=\"direction: ltr;\">\r\n                    <h3>Have control.</h3>\r\n                    <p>Agree your own shifts and rates of pay based on your preferences and availability.</p>\r\n                </div>\r\n                <div class=\"feature-visual\">\r\n                    <div class=\"feature-visual-content\">üéØ</div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"feature-block\">\r\n                <div class=\"feature-content\">\r\n                    <h3>Earn more.</h3>\r\n                    <p>No more agencies means you receive <span class=\"highlight\">100% of your agreed rate</span> - up to <span class=\"highlight\">20% more</span> than you would with an agency.</p>\r\n                </div>\r\n                <div class=\"feature-visual\">\r\n                    <div class=\"feature-visual-content\">üí∏</div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"quote-section\">\r\n                <h2>\"turbo-charging a digital revolution within healthcare staffing\"</h2>\r\n                <p>‚Äî Digital Innovation Director</p>\r\n            </div>\r\n\r\n            <div class=\"feature-block\" style=\"direction: rtl;\">\r\n                <div class=\"feature-content\" style=\"direction: ltr;\">\r\n                    <h3>simple and easy to use on any device</h3>\r\n                    <p>We connect healthcare professionals with regular, high-paying work via our <span class=\"highlight\">transparent</span> and <span class=\"highlight\">easy to use</span> platform</p>\r\n                    <p>Find shifts that are <span class=\"highlight\">perfect</span> for you in just a few clicks</p>\r\n                    <p>Forget paper timesheets - hours worked are auto-approved and submitted for payment <span class=\"highlight\">instantly</span> so you always get paid on time</p>\r\n                </div>\r\n                <div class=\"feature-visual\">\r\n                    <div class=\"feature-visual-content\">üì≤</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\n    <!-- Get Started Section -->\r\n    <section class=\"get-started\">\r\n        <div class=\"get-started-content\">\r\n            <h2>get started</h2>\r\n            <div class=\"requirements\">\r\n                <p>To find and book shifts with Nocturnal you must be allowed to work in the UK, have worked as a GP or registered Nurse (RGN or RMN) for at least one year and have up-to-date documents.</p>\r\n            </div>\r\n            <p style=\"font-weight: 600; margin-top: 30px;\">that's it.</p>\r\n            <p style=\"margin-top: 20px;\">Nocturnal has nationwide coverage and is working with many of the best known primary and urgent care providers, GP federations, social care providers and care homes in both the NHS and private sector.</p>\r\n            <p class=\"bold-text\">got all your documentation to hand? you can start booking shifts today.</p>\r\n            <button class=\"btn btn-primary btn-lg\" onclick=\"openRegisterModal()\" style=\"font-size: 1.1rem; padding: 15px 40px; margin-top: 20px;\">get started</button>\r\n        </div>\r\n    </section>\r\n\r\n    <!-- Footer -->\r\n    <footer>\r\n        <div class=\"social-links\">\r\n            <a href=\"#\" title=\"Facebook\">üìò</a>\r\n            <a href=\"#\" title=\"LinkedIn\">üíº</a>\r\n            <a href=\"#\" title=\"Twitter\">üê¶</a>\r\n        </div>\r\n        <div class=\"footer-links\">\r\n            <a href=\"#\" onclick=\"alert('Help Center coming soon'); return false;\">HELP CENTER</a>\r\n            <a href=\"#\" onclick=\"alert('Careers page coming soon'); return false;\">CAREERS</a>\r\n            <a href=\"#\" onclick=\"alert('Privacy Policy coming soon'); return false;\">PRIVACY</a>\r\n            <a href=\"#\" onclick=\"alert('Terms of Use coming soon'); return false;\">TERMS OF USE</a>\r\n            <a href=\"#\" onclick=\"alert('Contact page coming soon'); return false;\">CONTACT</a>\r\n        </div>\r\n        <p style=\"margin-top: 20px;\">&copy; 2025 Nocturnal. All rights reserved.</p>\r\n    </footer>\r\n\r\n    <!-- Login Modal -->\r\n    <div id=\"loginModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <button class=\"close-modal\" onclick=\"closeLoginModal()\">&times;</button>\r\n            <h2>Welcome Back</h2>\r\n            <div id=\"loginError\"></div>\r\n            <form id=\"loginForm\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"loginEmail\">Email</label>\r\n                    <input type=\"email\" id=\"loginEmail\" required>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"loginPassword\">Password</label>\r\n                    <input type=\"password\" id=\"loginPassword\" required>\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Login</button>\r\n            </form>\r\n            <div class=\"modal-footer\">\r\n                <p>Don't have an account? <a onclick=\"closeLoginModal(); openRegisterModal();\">Sign up</a></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Register Modal -->\r\n    <div id=\"registerModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <button class=\"close-modal\" onclick=\"closeRegisterModal()\">&times;</button>\r\n            <h2>Get Started</h2>\r\n            <div id=\"registerError\"></div>\r\n            <form id=\"registerForm\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"registerName\">Full Name</label>\r\n                    <input type=\"text\" id=\"registerName\" required>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"registerEmail\">Email</label>\r\n                    <input type=\"email\" id=\"registerEmail\" required>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"registerPassword\">Password</label>\r\n                    <input type=\"password\" id=\"registerPassword\" required minlength=\"6\">\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"registerRole\">I am a...</label>\r\n                    <select id=\"registerRole\" required>\r\n                        <option value=\"\">Select your role</option>\r\n                        <option value=\"doctor\">Doctor / GP</option>\r\n                        <option value=\"nurse\">Nurse (RGN/RMN)</option>\r\n                        <option value=\"admin\">Hospital Administrator</option>\r\n                    </select>\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Create Account</button>\r\n            </form>\r\n            <div class=\"modal-footer\">\r\n                <p>Already have an account? <a onclick=\"closeRegisterModal(); openLoginModal();\">Login</a></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- JWT-based Authentication (Firebase removed for security) -->\r\n    <script>\r\n        // Check if user is already logged in\r\n        window.addEventListener('DOMContentLoaded', async () => {\r\n            const token = localStorage.getItem('token');\r\n            if (token) {\r\n                try {\r\n                    // Verify token with backend\r\n                    const response = await fetch('http://localhost:5000/api/auth/me', {\r\n                        headers: { 'Authorization': `Bearer ${token}` }\r\n                    });\r\n                    const data = await response.json();\r\n\r\n                    if (data.success && data.user) {\r\n                        const userData = data.user;\r\n                        localStorage.setItem('user', JSON.stringify(userData));\r\n\r\n                        if (userData.role === 'doctor' || userData.role === 'nurse') {\r\n                            if (userData.onboardingCompleted) {\r\n                                window.location.href = 'doctor-dashboard.html';\r\n                            } else {\r\n                                window.location.href = 'doctor-onboarding.html';\r\n                            }\r\n                        } else if (userData.role === 'admin') {\r\n                            window.location.href = 'admin-dashboard.html';\r\n                        }\r\n                    } else {\r\n                        // Token invalid, clear it\r\n                        localStorage.removeItem('token');\r\n                        localStorage.removeItem('user');\r\n                    }\r\n                } catch (error) {\r\n                    console.log('No valid session');\r\n                    localStorage.removeItem('token');\r\n                    localStorage.removeItem('user');\r\n                }\r\n            }\r\n        });\r\n\r\n        // Login Form Handler\r\n        document.getElementById('loginForm').addEventListener('submit', async (e) => {\r\n            e.preventDefault();\r\n            const btn = e.target.querySelector('button[type=\"submit\"]');\r\n            const errorDiv = document.getElementById('loginError');\r\n            errorDiv.innerHTML = '';\r\n\r\n            btn.classList.add('loading');\r\n\r\n            const email = document.getElementById('loginEmail').value;\r\n            const password = document.getElementById('loginPassword').value;\r\n\r\n            try {\r\n                // Login using secure JWT-based backend API\r\n                const response = await fetch('http://localhost:5000/api/auth/login', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ email, password })\r\n                });\r\n\r\n                const data = await response.json();\r\n\r\n                if (data.success && data.token) {\r\n                    localStorage.setItem('token', data.token);\r\n                    localStorage.setItem('user', JSON.stringify(data.user));\r\n\r\n                    if (data.user.role === 'doctor' || data.user.role === 'nurse') {\r\n                        localStorage.setItem('userType', 'doctor');\r\n                        // Check if onboarding is completed\r\n                        if (data.user.onboardingCompleted) {\r\n                            window.location.href = 'doctor-dashboard.html';\r\n                        } else {\r\n                            window.location.href = 'doctor-onboarding.html';\r\n                        }\r\n                    } else if (data.user.role === 'admin') {\r\n                        localStorage.setItem('userType', 'hospital');\r\n                        window.location.href = 'admin-dashboard.html';\r\n                    }\r\n                } else {\r\n                    throw new Error(data.message || 'Login failed');\r\n                }\r\n            } catch (error) {\r\n                console.error('Login error:', error);\r\n                errorDiv.innerHTML = '<div class=\"error-message\">Invalid email or password. Please try again.</div>';\r\n                btn.classList.remove('loading');\r\n            }\r\n        });\r\n\r\n        // Register Form Handler\r\n        document.getElementById('registerForm').addEventListener('submit', async (e) => {\r\n            e.preventDefault();\r\n            const btn = e.target.querySelector('button[type=\"submit\"]');\r\n            const errorDiv = document.getElementById('registerError');\r\n            errorDiv.innerHTML = '';\r\n\r\n            btn.classList.add('loading');\r\n\r\n            const name = document.getElementById('registerName').value;\r\n            const email = document.getElementById('registerEmail').value;\r\n            const password = document.getElementById('registerPassword').value;\r\n            const role = document.getElementById('registerRole').value;\r\n\r\n            try {\r\n                // Register using secure JWT-based backend API\r\n                const response = await fetch('http://localhost:5000/api/auth/register', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ name, email, password, role })\r\n                });\r\n\r\n                const data = await response.json();\r\n\r\n                if (data.success && data.token) {\r\n                    localStorage.setItem('token', data.token);\r\n                    localStorage.setItem('user', JSON.stringify(data.user));\r\n\r\n                    if (role === 'doctor' || role === 'nurse') {\r\n                        localStorage.setItem('userType', 'doctor');\r\n                        window.location.href = 'doctor-onboarding.html';\r\n                    } else if (role === 'admin') {\r\n                        localStorage.setItem('userType', 'hospital');\r\n                        window.location.href = 'admin-dashboard.html';\r\n                    }\r\n                } else {\r\n                    throw new Error(data.message || 'Registration failed');\r\n                }\r\n            } catch (error) {\r\n                console.error('Registration error:', error);\r\n                let errorMessage = 'Registration failed. Please try again.';\r\n                if (error.message && error.message.includes('already exists')) {\r\n                    errorMessage = 'This email is already registered. Please login instead.';\r\n                } else if (error.message && error.message.includes('password')) {\r\n                    errorMessage = 'Password must be at least 8 characters with uppercase, lowercase, number, and special character.';\r\n                }\r\n                errorDiv.innerHTML = `<div class=\"error-message\">${errorMessage}</div>`;\r\n                btn.classList.remove('loading');\r\n            }\r\n        });\r\n    </script>\r\n\r\n    <script>\r\n        // Modal Functions\r\n        function openLoginModal() {\r\n            document.getElementById('loginModal').style.display = 'block';\r\n            document.body.style.overflow = 'hidden';\r\n        }\r\n\r\n        function closeLoginModal() {\r\n            document.getElementById('loginModal').style.display = 'none';\r\n            document.body.style.overflow = 'auto';\r\n            document.getElementById('loginError').innerHTML = '';\r\n        }\r\n\r\n        function openRegisterModal() {\r\n            // Redirect to unified landing page for registration\r\n            window.location.href = 'index-unified.html';\r\n        }\r\n\r\n        function closeRegisterModal() {\r\n            document.getElementById('registerModal').style.display = 'none';\r\n            document.body.style.overflow = 'auto';\r\n            document.getElementById('registerError').innerHTML = '';\r\n        }\r\n\r\n        // Close modal when clicking outside\r\n        window.onclick = function(event) {\r\n            const loginModal = document.getElementById('loginModal');\r\n            const registerModal = document.getElementById('registerModal');\r\n            if (event.target === loginModal) {\r\n                closeLoginModal();\r\n            }\r\n            if (event.target === registerModal) {\r\n                closeRegisterModal();\r\n            }\r\n        }\r\n    </script>\r\n</body>\r\n</html>\r\n"
  },
  {
    "original": "client/public/admin-analytics.html",
    "css": "client\\public\\css\\admin-analytics.css",
    "backup": "client/public/admin-analytics.html.original",
    "styleSize": 10818,
    "modified": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Analytics Dashboard - Hospital Admin</title>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <link rel=\"stylesheet\" href=\"css/admin-analytics.css\">\n</head>\n<body>\n    <!-- Navigation -->\n    <nav class=\"navbar\">\n        <div class=\"logo\">üåô Nocturnal Admin</div>\n        <div class=\"nav-links\">\n            <a href=\"admin-dashboard.html\">Dashboard</a>\n            <a href=\"admin-post-duty.html\">Post Duty</a>\n            <a href=\"admin-applications.html\">Applications</a>\n            <a href=\"admin-analytics.html\" class=\"active\">Analytics</a>\n            <a href=\"admin-settings.html\">Settings</a>\n            <a href=\"admin-profile.html\">Profile</a>\n        </div>\n        <button class=\"logout-btn\" onclick=\"logout()\">Logout</button>\n    </nav>\n\n    <!-- Main Content -->\n    <div class=\"container\">\n        <div class=\"page-header\">\n            <h1><i class=\"fas fa-chart-line\"></i> Analytics & Intelligence Dashboard</h1>\n            <p>AI-powered insights, forecasting, and optimization</p>\n        </div>\n\n        <!-- Loading State -->\n        <div id=\"loading\" class=\"loading\">\n            <i class=\"fas fa-spinner fa-spin\" style=\"font-size: 3rem;\"></i>\n            <p>Loading analytics data...</p>\n        </div>\n\n        <!-- Main Content -->\n        <div id=\"mainContent\" style=\"display: none;\">\n            <!-- Key Metrics -->\n            <div class=\"stats-grid\">\n                <div class=\"stat-card blue\">\n                    <div class=\"stat-header\">\n                        <div>\n                            <div class=\"stat-label\">Duties Posted</div>\n                            <div class=\"stat-value\" id=\"totalPosted\">0</div>\n                            <div class=\"stat-change positive\" id=\"postedChange\">\n                                <i class=\"fas fa-arrow-up\"></i> 0% vs last month\n                            </div>\n                        </div>\n                        <div class=\"stat-icon\"><i class=\"fas fa-briefcase\"></i></div>\n                    </div>\n                </div>\n\n                <div class=\"stat-card green\">\n                    <div class=\"stat-header\">\n                        <div>\n                            <div class=\"stat-label\">Fill Rate</div>\n                            <div class=\"stat-value\" id=\"fillRate\">0%</div>\n                            <div class=\"stat-benchmark\">Industry avg: 79%</div>\n                        </div>\n                        <div class=\"stat-icon\"><i class=\"fas fa-check-circle\"></i></div>\n                    </div>\n                </div>\n\n                <div class=\"stat-card yellow\">\n                    <div class=\"stat-header\">\n                        <div>\n                            <div class=\"stat-label\">Avg Time to Fill</div>\n                            <div class=\"stat-value\" id=\"avgTime\">0h</div>\n                            <div class=\"stat-benchmark\">Industry avg: 8.5h</div>\n                        </div>\n                        <div class=\"stat-icon\"><i class=\"fas fa-clock\"></i></div>\n                    </div>\n                </div>\n\n                <div class=\"stat-card red\">\n                    <div class=\"stat-header\">\n                        <div>\n                            <div class=\"stat-label\">Total Spend</div>\n                            <div class=\"stat-value\" id=\"totalSpend\">‚Çπ0</div>\n                            <div class=\"stat-change\" id=\"spendChange\">\n                                <i class=\"fas fa-arrow-down\"></i> 0% vs budget\n                            </div>\n                        </div>\n                        <div class=\"stat-icon\"><i class=\"fas fa-rupee-sign\"></i></div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- AI Predictive Forecasting -->\n            <div class=\"forecast-card\">\n                <h3><i class=\"fas fa-brain\"></i> AI Predictive Forecasting - Next 2 Weeks</h3>\n                <div id=\"forecastWarning\" style=\"background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; display: none;\">\n                    <i class=\"fas fa-exclamation-triangle\"></i> <strong>High Demand Period Detected</strong>\n                </div>\n                <div class=\"forecast-grid\">\n                    <div class=\"forecast-item\">\n                        <div class=\"forecast-label\">Predicted Shifts Needed</div>\n                        <div class=\"forecast-value\" id=\"predictedShifts\">0</div>\n                    </div>\n                    <div class=\"forecast-item\">\n                        <div class=\"forecast-label\">Current Coverage</div>\n                        <div class=\"forecast-value\" id=\"currentCoverage\">0</div>\n                    </div>\n                    <div class=\"forecast-item\">\n                        <div class=\"forecast-label\">Staffing Gap</div>\n                        <div class=\"forecast-value\" id=\"staffingGap\">0</div>\n                    </div>\n                    <div class=\"forecast-item\">\n                        <div class=\"forecast-label\">Estimated Cost</div>\n                        <div class=\"forecast-value\" id=\"estimatedCost\">‚Çπ0</div>\n                    </div>\n                </div>\n                <div id=\"recommendationsList\" style=\"margin-top: 20px;\"></div>\n            </div>\n\n            <!-- Charts and Rankings -->\n            <div class=\"chart-grid\">\n                <!-- Fill Rate Trend -->\n                <div class=\"card\">\n                    <h3><i class=\"fas fa-chart-area\"></i> Fill Rate Trend</h3>\n                    <div style=\"position: relative; height: 300px;\">\n                        <canvas id=\"fillRateChart\"></canvas>\n                    </div>\n                </div>\n\n                <!-- Financial Summary -->\n                <div class=\"card\">\n                    <h3><i class=\"fas fa-wallet\"></i> Financial Summary</h3>\n                    <div style=\"margin-bottom: 20px;\">\n                        <div style=\"display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #e0e0e0;\">\n                            <span style=\"color: var(--gray);\">Budget</span>\n                            <strong style=\"color: var(--primary);\" id=\"budget\">‚Çπ0</strong>\n                        </div>\n                        <div style=\"display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #e0e0e0;\">\n                            <span style=\"color: var(--gray);\">Spent</span>\n                            <strong style=\"color: var(--danger);\" id=\"spent\">‚Çπ0</strong>\n                        </div>\n                        <div style=\"display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #e0e0e0;\">\n                            <span style=\"color: var(--gray);\">Remaining</span>\n                            <strong style=\"color: var(--success);\" id=\"remaining\">‚Çπ0</strong>\n                        </div>\n                        <div style=\"display: flex; justify-content: space-between; padding: 15px 0;\">\n                            <span style=\"color: var(--gray);\">Avg Cost/Shift</span>\n                            <strong style=\"color: var(--primary);\" id=\"avgCost\">‚Çπ0</strong>\n                        </div>\n                    </div>\n                    <div style=\"position: relative; height: 250px;\">\n                        <canvas id=\"budgetChart\"></canvas>\n                    </div>\n                </div>\n            </div>\n\n            <!-- AI Applicant Ranking -->\n            <div class=\"card\">\n                <h3><i class=\"fas fa-robot\"></i> AI-Powered Applicant Ranking (Sample)</h3>\n                <p style=\"color: var(--gray); margin-bottom: 20px;\">Smart matching based on 47+ data points including experience, ratings, location, and past performance</p>\n                <div id=\"applicantList\">\n                    <!-- Will be populated dynamically -->\n                </div>\n            </div>\n\n            <!-- Top Performers -->\n            <div class=\"card\">\n                <h3><i class=\"fas fa-star\"></i> Top Performing Doctors</h3>\n                <div id=\"performersList\"></div>\n            </div>\n\n            <!-- Cost Optimization -->\n            <div class=\"card\">\n                <h3><i class=\"fas fa-piggy-bank\"></i> Cost Optimization Opportunities</h3>\n                <div class=\"optimization-grid\" id=\"optimizationList\"></div>\n            </div>\n\n            <!-- Quality Metrics -->\n            <div class=\"chart-grid\">\n                <div class=\"card\">\n                    <h3><i class=\"fas fa-award\"></i> Quality Metrics</h3>\n                    <div style=\"position: relative; height: 250px;\">\n                        <canvas id=\"qualityChart\"></canvas>\n                    </div>\n                </div>\n\n                <div class=\"card\">\n                    <h3><i class=\"fas fa-chart-pie\"></i> Shift Distribution</h3>\n                    <div style=\"position: relative; height: 250px;\">\n                        <canvas id=\"distributionChart\"></canvas>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        const API_URL = 'http://localhost:5000/api';\n\n        document.addEventListener('DOMContentLoaded', function() {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                window.location.href = 'index.html';\n                return;\n            }\n\n            loadAnalytics();\n        });\n\n        async function loadAnalytics() {\n            try {\n                const token = localStorage.getItem('token');\n                const response = await fetch(`${API_URL}/analytics/hospital/dashboard`, {\n                    headers: {\n                        'Authorization': `Bearer ${token}`\n                    }\n                });\n\n                const data = await response.json();\n\n                if (data.success) {\n                    displayAnalytics(data.data);\n                    document.getElementById('loading').style.display = 'none';\n                    document.getElementById('mainContent').style.display = 'block';\n                } else {\n                    // Show mock data for demo\n                    displayMockData();\n                    document.getElementById('loading').style.display = 'none';\n                    document.getElementById('mainContent').style.display = 'block';\n                }\n            } catch (error) {\n                console.error('Error loading analytics:', error);\n                // Show mock data for demo\n                displayMockData();\n                document.getElementById('loading').style.display = 'none';\n                document.getElementById('mainContent').style.display = 'block';\n            }\n        }\n\n        function displayAnalytics(data) {\n            console.log('Analytics data received:', data);\n\n            // Update key metrics\n            document.getElementById('totalPosted').textContent = data.keyMetrics?.totalPosted || 0;\n            document.getElementById('fillRate').textContent = (data.keyMetrics?.fillRate || 0) + '%';\n            document.getElementById('avgTime').textContent = (data.keyMetrics?.avgTimeToFill || 0) + 'h';\n            document.getElementById('totalSpend').textContent = '‚Çπ' + ((data.keyMetrics?.totalSpend || 0) / 1000).toFixed(0) + 'k';\n\n            // Update budget section\n            const monthlyBudget = data.budget?.monthlyBudget || 0;\n            const spent = data.budget?.spent || 0;\n            const remaining = data.budget?.remaining || 0;\n            const avgCost = spent > 0 && data.keyMetrics?.totalPosted > 0\n                ? Math.round(spent / data.keyMetrics.totalPosted)\n                : 0;\n\n            document.getElementById('budget').textContent = '‚Çπ' + (monthlyBudget / 1000).toFixed(0) + 'k';\n            document.getElementById('spent').textContent = '‚Çπ' + (spent / 1000).toFixed(0) + 'k';\n            document.getElementById('remaining').textContent = '‚Çπ' + (remaining / 1000).toFixed(0) + 'k';\n            document.getElementById('avgCost').textContent = '‚Çπ' + avgCost.toLocaleString();\n\n            // Update forecast section\n            if (data.predictions) {\n                document.getElementById('predictedShifts').textContent = data.predictions.nextTwoWeeks || 0;\n                const filledUpcoming = (data.predictions.nextTwoWeeks || 0) - (data.predictions.staffingGap || 0);\n                document.getElementById('currentCoverage').textContent = filledUpcoming;\n                document.getElementById('staffingGap').textContent = data.predictions.staffingGap || 0;\n                const estimatedCost = avgCost * (data.predictions.nextTwoWeeks || 0);\n                document.getElementById('estimatedCost').textContent = '‚Çπ' + (estimatedCost / 1000).toFixed(0) + 'k';\n\n                // Show warning if staffing gap exists\n                if (data.predictions.staffingGap > 0) {\n                    document.getElementById('forecastWarning').style.display = 'block';\n                    displayRecommendations(data.recommendations);\n                }\n            }\n\n            // Display charts with real data\n            createCharts(data);\n\n            // Display top performers\n            if (data.topDoctors && data.topDoctors.length > 0) {\n                displayTopPerformers(data.topDoctors);\n            }\n\n            // Display optimization opportunities\n            if (data.optimizationOpportunities && data.optimizationOpportunities.length > 0) {\n                displayOptimization(data.optimizationOpportunities);\n            }\n\n            // Display AI applicant ranking\n            displaySampleApplicants();\n        }\n\n        function displayMockData() {\n            const mockData = {\n                dutyStats: { totalPosted: 45, fillRate: 84, avgTimeToFill: 6.2 },\n                financialStats: { totalBudget: 500000, totalSpent: 345000, remainingBudget: 155000, avgCostPerShift: 9079 },\n                predictions: { nextMonthDemand: 18, estimatedCost: 245000, staffingGap: 6 }\n            };\n            displayAnalytics(mockData);\n        }\n\n        function displayRecommendations() {\n            const html = `\n                <div class=\"recommendation-card\">\n                    <h4><i class=\"fas fa-lightbulb\"></i> AI Recommendations</h4>\n                    <p>Based on historical data and current trends, we recommend:</p>\n                    <ul>\n                        <li>Post duties now (not last minute) to reduce emergency surcharges by 30%</li>\n                        <li>Increase pay by 10% for this high-demand period to attract more applicants</li>\n                        <li>Contact your top 5 preferred doctors early for availability</li>\n                        <li>Expected total cost: ‚Çπ2,45,000 (within budget)</li>\n                    </ul>\n                </div>\n            `;\n            document.getElementById('recommendationsList').innerHTML = html;\n        }\n\n        function displaySampleApplicants() {\n            const applicants = [\n                { name: 'Dr. Sharma', rating: 4.9, experience: 12, distance: 2.3, shifts: 8, match: 96 },\n                { name: 'Dr. Patel', rating: 4.8, experience: 8, distance: 5.1, shifts: 0, match: 89 },\n                { name: 'Dr. Kumar', rating: 4.2, experience: 3, distance: 18, shifts: 0, match: 72 }\n            ];\n\n            let html = '';\n            applicants.forEach((applicant, index) => {\n                html += `\n                    <div class=\"applicant-card ${index === 0 ? 'top' : ''}\">\n                        <div class=\"applicant-header\">\n                            <div class=\"applicant-name\">${index + 1}. ${applicant.name}</div>\n                            <div class=\"match-score\">${applicant.match}% Match</div>\n                        </div>\n                        <div class=\"applicant-details\">\n                            <div class=\"detail-item\">\n                                <i class=\"fas fa-star\"></i> ${applicant.rating}‚òÖ rating\n                            </div>\n                            <div class=\"detail-item\">\n                                <i class=\"fas fa-briefcase\"></i> ${applicant.experience} years exp\n                            </div>\n                            <div class=\"detail-item\">\n                                <i class=\"fas fa-map-marker-alt\"></i> ${applicant.distance} km away\n                            </div>\n                            <div class=\"detail-item\">\n                                <i class=\"fas fa-history\"></i> ${applicant.shifts > 0 ? `Worked ${applicant.shifts} times` : 'New applicant'}\n                            </div>\n                            <div class=\"detail-item\">\n                                <i class=\"fas fa-clock\"></i> Applied 2 min ago\n                            </div>\n                            <div class=\"detail-item\">\n                                <i class=\"fas fa-check-circle\"></i> 100% completion rate\n                            </div>\n                        </div>\n                        ${index === 0 ? '<p style=\"color: var(--success); font-weight: 600; margin: 10px 0;\"><i class=\"fas fa-thumbs-up\"></i> Best match! Has worked for you 8 times with 5‚òÖ every time</p>' : ''}\n                        <div class=\"applicant-actions\">\n                            <button class=\"btn btn-success\" onclick=\"acceptApplicant('${applicant.name}')\">\n                                <i class=\"fas fa-check\"></i> Instant Accept\n                            </button>\n                            <button class=\"btn btn-primary\">\n                                <i class=\"fas fa-phone\"></i> Interview\n                            </button>\n                            <button class=\"btn btn-danger\">\n                                <i class=\"fas fa-times\"></i> Reject\n                            </button>\n                        </div>\n                    </div>\n                `;\n            });\n            document.getElementById('applicantList').innerHTML = html;\n        }\n\n        function displayTopPerformers(performers) {\n            const mockPerformers = [\n                { name: 'Dr. Sharma', shifts: 15, rating: 4.9 },\n                { name: 'Dr. Patel', shifts: 12, rating: 4.8 },\n                { name: 'Dr. Kumar', shifts: 10, rating: 4.7 }\n            ];\n\n            let html = '';\n            mockPerformers.forEach(performer => {\n                const initials = performer.name.split(' ').map(n => n[0]).join('');\n                html += `\n                    <div class=\"performer-item\">\n                        <div class=\"performer-info\">\n                            <div class=\"performer-avatar\">${initials}</div>\n                            <div class=\"performer-details\">\n                                <h4>${performer.name}</h4>\n                                <p>Cardiology Specialist</p>\n                            </div>\n                        </div>\n                        <div class=\"performer-stats\">\n                            <div class=\"performer-stat\"><strong>${performer.shifts}</strong> shifts</div>\n                            <div class=\"performer-stat\"><strong>${performer.rating}</strong>‚òÖ rating</div>\n                        </div>\n                    </div>\n                `;\n            });\n            document.getElementById('performersList').innerHTML = html;\n        }\n\n        function displayOptimization() {\n            const html = `\n                <div class=\"optimization-item\">\n                    <h5><i class=\"fas fa-calendar\"></i> Plan Ahead</h5>\n                    <p style=\"font-size: 0.9rem; color: var(--gray);\">Post shifts 7 days ahead</p>\n                    <div class=\"savings-amount\">-‚Çπ45k/month</div>\n                    <p style=\"font-size: 0.85rem; color: var(--gray); margin-top: 5px;\">Reduces emergency surcharges by 30%</p>\n                </div>\n                <div class=\"optimization-item\">\n                    <h5><i class=\"fas fa-redo\"></i> Use Recurring</h5>\n                    <p style=\"font-size: 0.9rem; color: var(--gray);\">Book recurring shifts</p>\n                    <div class=\"savings-amount\">-‚Çπ30k/month</div>\n                    <p style=\"font-size: 0.85rem; color: var(--gray); margin-top: 5px;\">10% discount on shift series</p>\n                </div>\n                <div class=\"optimization-item\">\n                    <h5><i class=\"fas fa-users\"></i> Preferred Pool</h5>\n                    <p style=\"font-size: 0.9rem; color: var(--gray);\">Hire from preferred doctors</p>\n                    <div class=\"savings-amount\">-‚Çπ25k/month</div>\n                    <p style=\"font-size: 0.85rem; color: var(--gray); margin-top: 5px;\">15% faster fill rate</p>\n                </div>\n                <div class=\"optimization-item\">\n                    <h5><i class=\"fas fa-clock\"></i> Peak Hours</h5>\n                    <p style=\"font-size: 0.9rem; color: var(--gray);\">Post during high-traffic times</p>\n                    <div class=\"savings-amount\">-‚Çπ20k/month</div>\n                    <p style=\"font-size: 0.85rem; color: var(--gray); margin-top: 5px;\">20% more applicants</p>\n                </div>\n            `;\n            document.getElementById('optimizationList').innerHTML = html;\n        }\n\n        // Store chart instances globally to destroy them later\n        let chartInstances = {\n            fillRate: null,\n            budget: null,\n            quality: null,\n            distribution: null\n        };\n\n        function createCharts(data) {\n            // Destroy existing charts to prevent memory leaks\n            Object.values(chartInstances).forEach(chart => {\n                if (chart) chart.destroy();\n            });\n\n            // Fill Rate Trend Chart - using real data\n            const ctx1 = document.getElementById('fillRateChart').getContext('2d');\n            const fillRateTrend = data.fillRateTrend || [];\n            const trendLabels = fillRateTrend.map(item => item.month);\n            const trendData = fillRateTrend.map(item => item.rate);\n\n            chartInstances.fillRate = new Chart(ctx1, {\n                type: 'line',\n                data: {\n                    labels: trendLabels.length > 0 ? trendLabels : ['Oct', 'Nov', 'Dec', 'Jan', 'Feb', 'Mar'],\n                    datasets: [{\n                        label: 'Fill Rate (%)',\n                        data: trendData.length > 0 ? trendData : [0, 0, 0, 0, 0, 0],\n                        borderColor: '#28a745',\n                        backgroundColor: 'rgba(40, 167, 69, 0.1)',\n                        tension: 0.4,\n                        fill: true\n                    }, {\n                        label: 'Industry Avg',\n                        data: [79, 79, 79, 79, 79, 79],\n                        borderColor: '#6c757d',\n                        borderDash: [5, 5],\n                        fill: false\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false\n                }\n            });\n\n            // Budget Chart - using real data\n            const ctx2 = document.getElementById('budgetChart').getContext('2d');\n            const spent = data.budget?.spent || 0;\n            const remaining = data.budget?.remaining || 0;\n\n            chartInstances.budget = new Chart(ctx2, {\n                type: 'doughnut',\n                data: {\n                    labels: ['Spent', 'Remaining'],\n                    datasets: [{\n                        data: [spent, Math.max(0, remaining)],\n                        backgroundColor: ['#dc3545', '#28a745']\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false\n                }\n            });\n\n            // Quality Metrics\n            const ctx3 = document.getElementById('qualityChart').getContext('2d');\n            const qualityData = data.qualityMetrics || {};\n            const avgRating = parseFloat(qualityData.avgDoctorRating) || 0;\n\n            chartInstances.quality = new Chart(ctx3, {\n                type: 'bar',\n                data: {\n                    labels: ['Avg Rating', 'On-Time %', 'Completion %', 'Rehire %'],\n                    datasets: [{\n                        label: 'Quality Score',\n                        data: [4.7, 95, 98, 89],\n                        backgroundColor: ['#5B8DBE', '#28a745', '#17a2b8', '#ffc107']\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        y: { beginAtZero: true, max: 100 }\n                    }\n                }\n            });\n\n            // Shift Distribution\n            const ctx4 = document.getElementById('distributionChart').getContext('2d');\n            chartInstances.distribution = new Chart(ctx4, {\n                type: 'pie',\n                data: {\n                    labels: ['ICU', 'Emergency', 'Cardiology', 'General'],\n                    datasets: [{\n                        data: [12, 15, 11, 7],\n                        backgroundColor: ['#5B8DBE', '#dc3545', '#28a745', '#ffc107']\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false\n                }\n            });\n        }\n\n        function acceptApplicant(name) {\n            alert(`${name} accepted! Notification sent to doctor. Calendar event created.`);\n        }\n\n        function logout() {\n            localStorage.clear();\n            window.location.href = 'index.html';\n        }\n    </script>\n    <!-- Unified Navigation & Notifications -->\n    <script src=\"/js/auto-inject-nav.js\"></script>\n</body>\n</html>\n"
  },
  {
    "original": "client/public/index-backup.html",
    "css": "client\\public\\css\\index-backup.css",
    "backup": "client/public/index-backup.html.original",
    "styleSize": 19039,
    "modified": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Nocturnal - Healthcare Platform</title>\r\n    <link rel=\"stylesheet\" href=\"css/index-backup.css\">\r\n</head>\r\n<body>\r\n\r\n<!-- LANDING PAGE -->\r\n<div id=\"landing-page\" class=\"landing-container\">\r\n    <div class=\"landing-content\">\r\n        <div class=\"landing-hero\">\r\n            <div class=\"hero-left\">\r\n                <div class=\"landing-logo\">\r\n                    <div class=\"logo-icon\">üè•</div>\r\n                    <h1>Nocturnal</h1>\r\n                </div>\r\n                <p class=\"landing-tagline\">Finding Healthcare Shifts Has Never Been So Easy</p>\r\n                <p class=\"landing-description\">\r\n                    Nocturnal matches healthcare professionals with their perfect shifts. Take back control \r\n                    and work where you want, when you want, and how you want.\r\n                </p>\r\n                <p class=\"landing-description\" style=\"font-size: 1.2rem; font-weight: 600;\">\r\n                    No more agencies.\r\n                </p>\r\n            </div>\r\n            \r\n            <div class=\"hero-right\">\r\n                <button id=\"show-login-btn\" class=\"btn-large btn-primary\">Login to Your Account</button>\r\n                <button id=\"show-register-btn\" class=\"btn-large btn-secondary\">Create New Account</button>\r\n                <p style=\"color: #64748b; font-size: 0.9rem; text-align: center; margin-top: 10px;\">\r\n                    Join thousands of healthcare professionals\r\n                </p>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"landing-features\">\r\n            <div class=\"feature\">\r\n                <div class=\"feature-icon\">üí™</div>\r\n                <h3>Be Your Own Boss</h3>\r\n                <p>Set your rates, choose your shifts, and take back control of your career</p>\r\n            </div>\r\n            <div class=\"feature\">\r\n                <div class=\"feature-icon\">üîí</div>\r\n                <h3>Secure & Verified</h3>\r\n                <p>All users verified and authenticated for your safety</p>\r\n            </div>\r\n            <div class=\"feature\">\r\n                <div class=\"feature-icon\">üí∞</div>\r\n                <h3>Transparent Pricing</h3>\r\n                <p>Clear compensation with no hidden fees - earn up to 20% more</p>\r\n            </div>\r\n            <div class=\"feature\">\r\n                <div class=\"feature-icon\">üì±</div>\r\n                <h3>Simple Platform</h3>\r\n                <p>Easy to use on any device. Apply to shifts with just one click</p>\r\n            </div>\r\n        </div>\r\n\r\n        <div style=\"background: white; padding: 40px; border-radius: 16px; margin-bottom: 60px; border: 2px solid #dbeafe; box-shadow: 0 4px 15px rgba(0,0,0,0.08); text-align: center;\">\r\n            <h2 style=\"color: #1e40af; font-size: 1.8rem; margin-bottom: 20px;\">To Get Started, You Need:</h2>\r\n            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; text-align: left; margin-top: 25px;\">\r\n                <div style=\"display: flex; align-items: start; gap: 10px;\">\r\n                    <span style=\"color: #10b981; font-size: 1.5rem;\">‚úì</span>\r\n                    <span style=\"color: #334155; font-size: 1rem;\">Right to work in the UK/India</span>\r\n                </div>\r\n                <div style=\"display: flex; align-items: start; gap: 10px;\">\r\n                    <span style=\"color: #10b981; font-size: 1.5rem;\">‚úì</span>\r\n                    <span style=\"color: #334155; font-size: 1rem;\">GP or RGN/RMN registration</span>\r\n                </div>\r\n                <div style=\"display: flex; align-items: start; gap: 10px;\">\r\n                    <span style=\"color: #10b981; font-size: 1.5rem;\">‚úì</span>\r\n                    <span style=\"color: #334155; font-size: 1rem;\">At least 1 year experience</span>\r\n                </div>\r\n                <div style=\"display: flex; align-items: start; gap: 10px;\">\r\n                    <span style=\"color: #10b981; font-size: 1.5rem;\">‚úì</span>\r\n                    <span style=\"color: #334155; font-size: 1rem;\">Up-to-date documentation</span>\r\n                </div>\r\n            </div>\r\n            <p style=\"color: #1e40af; font-size: 1.3rem; font-weight: 600; margin-top: 25px;\">That's it!</p>\r\n        </div>\r\n        \r\n        <div style=\"margin-top: 60px;\">\r\n            <h2 style=\"color: #1e40af; font-size: 2.2rem; margin-bottom: 40px; text-align: center;\">How It Works</h2>\r\n            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px;\">\r\n                <div style=\"text-align: center;\">\r\n                    <div style=\"background: #3b82f6; width: 60px; height: 60px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: white; margin: 0 auto 15px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);\">1</div>\r\n                    <h3 style=\"color: #1e40af; margin-bottom: 10px;\">Create Profile</h3>\r\n                    <p style=\"color: #475569; font-size: 0.95rem;\">Sign up and upload your credentials</p>\r\n                </div>\r\n                <div style=\"text-align: center;\">\r\n                    <div style=\"background: #3b82f6; width: 60px; height: 60px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: white; margin: 0 auto 15px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);\">2</div>\r\n                    <h3 style=\"color: #1e40af; margin-bottom: 10px;\">Browse Shifts</h3>\r\n                    <p style=\"color: #475569; font-size: 0.95rem;\">Find shifts that match your skills</p>\r\n                </div>\r\n                <div style=\"text-align: center;\">\r\n                    <div style=\"background: #3b82f6; width: 60px; height: 60px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: white; margin: 0 auto 15px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);\">3</div>\r\n                    <h3 style=\"color: #1e40af; margin-bottom: 10px;\">Apply & Work</h3>\r\n                    <p style=\"color: #475569; font-size: 0.95rem;\">One-click apply and get matched</p>\r\n                </div>\r\n                <div style=\"text-align: center;\">\r\n                    <div style=\"background: #3b82f6; width: 60px; height: 60px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: white; margin: 0 auto 15px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);\">4</div>\r\n                    <h3 style=\"color: #1e40af; margin-bottom: 10px;\">Get Paid</h3>\r\n                    <p style=\"color: #475569; font-size: 0.95rem;\">Automatic timesheet approval</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <p class=\"landing-footer\" style=\"margin-top: 50px; text-align: center; color: #475569;\">Trusted by hospitals and healthcare professionals across the country</p>\r\n        <div style=\"margin-top: 30px; padding-top: 30px; border-top: 2px solid #dbeafe;\">\r\n            <div style=\"display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; font-size: 0.9rem;\">\r\n                <a href=\"#\" style=\"color: #3b82f6; text-decoration: none; font-weight: 500;\">Help Center</a>\r\n                <a href=\"#\" style=\"color: #3b82f6; text-decoration: none; font-weight: 500;\">Privacy Policy</a>\r\n                <a href=\"#\" style=\"color: #3b82f6; text-decoration: none; font-weight: 500;\">Terms of Use</a>\r\n                <a href=\"#\" style=\"color: #3b82f6; text-decoration: none; font-weight: 500;\">Contact</a>\r\n            </div>\r\n            <p style=\"color: #64748b; margin-top: 20px; font-size: 0.85rem; text-align: center;\">¬© 2025 Nocturnal. All rights reserved.</p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- LOGIN PAGE -->\r\n<div id=\"login-page\" class=\"page\" style=\"display: none;\">\r\n    <button id=\"back-from-login\" class=\"back-btn\">‚Üê Back</button>\r\n    <h1>Login to Nocturnal</h1>\r\n    <div id=\"login-error\" class=\"message error\" style=\"display:none;\"></div>\r\n    <form id=\"login-form\">\r\n        <div class=\"form-group\">\r\n            <label>Email</label>\r\n            <input type=\"email\" id=\"login-email\" required placeholder=\"your.email@example.com\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>Password</label>\r\n            <input type=\"password\" id=\"login-password\" required placeholder=\"Enter your password\">\r\n        </div>\r\n        <button type=\"submit\">Login</button>\r\n    </form>\r\n    <p style=\"margin-top: 20px;\">Don't have an account? <span id=\"go-to-register\" class=\"link\">Register here</span></p>\r\n</div>\r\n\r\n<!-- REGISTER PAGE -->\r\n<div id=\"register-page\" class=\"page\" style=\"display: none;\">\r\n    <button id=\"back-from-register\" class=\"back-btn\">‚Üê Back</button>\r\n    <h1>Create Account</h1>\r\n    <div id=\"register-error\" class=\"message error\" style=\"display:none;\"></div>\r\n    <form id=\"register-form\">\r\n        <div class=\"form-group\">\r\n            <label>Full Name</label>\r\n            <input type=\"text\" id=\"register-name\" required placeholder=\"Dr. John Doe\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>Email</label>\r\n            <input type=\"email\" id=\"register-email\" required placeholder=\"your.email@example.com\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>Password</label>\r\n            <input type=\"password\" id=\"register-password\" required minlength=\"6\" placeholder=\"Minimum 6 characters\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>I am a...</label>\r\n            <select id=\"register-role\" required>\r\n                <option value=\"\">Select your role</option>\r\n                <option value=\"doctor\">Doctor</option>\r\n                <option value=\"nurse\">Nurse</option>\r\n                <option value=\"admin\">Hospital Administrator</option>\r\n            </select>\r\n        </div>\r\n        <div class=\"form-group\" id=\"specialty-field\">\r\n            <label>Specialty</label>\r\n            <input type=\"text\" id=\"register-specialty\" placeholder=\"e.g., Emergency Medicine\">\r\n        </div>\r\n        <div class=\"form-group\" id=\"hospital-field\">\r\n            <label>Hospital Name</label>\r\n            <input type=\"text\" id=\"register-hospital\" placeholder=\"e.g., City General Hospital\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label>Location</label>\r\n            <input type=\"text\" id=\"register-location\" required placeholder=\"e.g., Mumbai, India\">\r\n        </div>\r\n        <button type=\"submit\">Create Account</button>\r\n    </form>\r\n    <p style=\"margin-top: 20px;\">Already have an account? <span id=\"go-to-login\" class=\"link\">Login here</span></p>\r\n</div>\r\n\r\n<!-- DASHBOARD -->\r\n<div id=\"dashboard\" class=\"page\" style=\"display: none;\">\r\n    <div class=\"header\">\r\n        <div>\r\n            <h1>Welcome, <span id=\"user-name\"></span></h1>\r\n            <p id=\"user-info\" style=\"color: #666;\"></p>\r\n        </div>\r\n        <button id=\"logout-btn\">Logout</button>\r\n    </div>\r\n\r\n    <!-- ADMIN SECTION -->\r\n    <div id=\"admin-section\" style=\"display: none;\">\r\n        <h2>Post New Duty</h2>\r\n        <form id=\"post-duty-form\">\r\n            <div class=\"form-row\">\r\n                <div class=\"form-group\">\r\n                    <label>Title</label>\r\n                    <input type=\"text\" id=\"duty-title\" required placeholder=\"Night Shift ER Doctor\">\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label>Specialty</label>\r\n                    <input type=\"text\" id=\"duty-specialty\" required placeholder=\"Emergency Medicine\">\r\n                </div>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>Description</label>\r\n                <textarea id=\"duty-description\" rows=\"3\" required placeholder=\"Describe the duty requirements...\"></textarea>\r\n            </div>\r\n            <div class=\"form-row\">\r\n                <div class=\"form-group\">\r\n                    <label>Date</label>\r\n                    <input type=\"date\" id=\"duty-date\" required>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label>Start Time</label>\r\n                    <input type=\"time\" id=\"duty-start-time\" required value=\"20:00\">\r\n                </div>\r\n            </div>\r\n            <div class=\"form-row\">\r\n                <div class=\"form-group\">\r\n                    <label>End Time</label>\r\n                    <input type=\"time\" id=\"duty-end-time\" required value=\"06:00\">\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label>Hourly Rate (‚Çπ)</label>\r\n                    <input type=\"number\" id=\"duty-rate\" required min=\"1000\" placeholder=\"2000\">\r\n                </div>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>Urgency</label>\r\n                <select id=\"duty-urgency\" required>\r\n                    <option value=\"NORMAL\">Normal</option>\r\n                    <option value=\"URGENT\">Urgent</option>\r\n                </select>\r\n            </div>\r\n            <button type=\"submit\">Post Duty</button>\r\n        </form>\r\n\r\n        <hr>\r\n        \r\n        <h2>Applications Received</h2>\r\n        <div id=\"applications-received-list\"></div>\r\n    </div>\r\n\r\n    <!-- DOCTOR/NURSE SECTION -->\r\n    <div id=\"doctor-nurse-section\" style=\"display: none;\">\r\n        <h2>Available Duties</h2>\r\n        \r\n        <div class=\"filters-container\">\r\n            <input type=\"text\" id=\"search-duties\" placeholder=\"Search by title, hospital, or specialty...\" class=\"search-input\">\r\n            <div class=\"filter-row\">\r\n                <select id=\"filter-specialty\" class=\"filter-select\">\r\n                    <option value=\"\">All Specialties</option>\r\n                    <option value=\"Emergency Medicine\">Emergency Medicine</option>\r\n                    <option value=\"Internal Medicine\">Internal Medicine</option>\r\n                    <option value=\"Pediatrics\">Pediatrics</option>\r\n                    <option value=\"Surgery\">Surgery</option>\r\n                    <option value=\"ICU\">ICU</option>\r\n                </select>\r\n                <select id=\"filter-urgency\" class=\"filter-select\">\r\n                    <option value=\"\">All Urgency Levels</option>\r\n                    <option value=\"NORMAL\">Normal</option>\r\n                    <option value=\"URGENT\">Urgent</option>\r\n                </select>\r\n                <input type=\"date\" id=\"filter-date\" class=\"filter-select\" placeholder=\"Filter by date\">\r\n            </div>\r\n        </div>\r\n        \r\n        <div id=\"duties-list\"></div>\r\n\r\n        <hr>\r\n\r\n        <h2>My Applications</h2>\r\n        <div id=\"my-applications-list\"></div>\r\n    </div>\r\n</div>\r\n\r\n<!-- Hospital Profile Page -->\r\n<div id=\"hospital-profile-page\" class=\"page\" style=\"display: none;\">\r\n    <button class=\"back-to-dashboard-btn back-btn\">‚Üê Back to Dashboard</button>\r\n    \r\n    <div class=\"hospital-header\">\r\n        <div class=\"hospital-icon\">üè•</div>\r\n        <div>\r\n            <h1 id=\"hospital-name\"></h1>\r\n            <p id=\"hospital-location\" style=\"color: #666; font-size: 1.1rem;\"></p>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class=\"hospital-stats\">\r\n        <div class=\"stat-card\">\r\n            <div class=\"stat-number\" id=\"hospital-open-duties\">0</div>\r\n            <div class=\"stat-label\">Open Duties</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n            <div class=\"stat-number\" id=\"hospital-total-posted\">0</div>\r\n            <div class=\"stat-label\">Total Posted</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n            <div class=\"stat-number\">‚≠ê 4.8</div>\r\n            <div class=\"stat-label\">Rating</div>\r\n        </div>\r\n    </div>\r\n    \r\n    <h2 style=\"margin-top: 40px;\">Available Duties at This Hospital</h2>\r\n    <div id=\"hospital-duties-list\"></div>\r\n</div>\r\n\r\n<!-- APPLY MODAL (outside dashboard is fine) -->\r\n<div id=\"apply-modal\" class=\"modal\">\r\n    <div class=\"modal-content\">\r\n        <span class=\"close-modal\" id=\"close-apply-modal\">&times;</span>\r\n        <h2>Apply for Duty</h2>\r\n        <form id=\"apply-form\">\r\n            <div class=\"form-group\">\r\n                <label>Cover Letter</label>\r\n                <textarea id=\"cover-letter\" rows=\"6\" required placeholder=\"Tell the hospital why you're the right fit for this duty...\"></textarea>\r\n            </div>\r\n            <button type=\"submit\">Submit Application</button>\r\n        </form>\r\n    </div>\r\n</div>\r\n\r\n<!-- ============================================ -->\r\n<!-- CLEAN FIREBASE & SCRIPTS SECTION -->\r\n<!-- REPLACE YOUR BROKEN SCRIPTS WITH THIS -->\r\n<!-- ============================================ -->\r\n\r\n<script type=\"module\">\r\n    // Import Firebase modules\r\n    import { initializeApp } from \"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js\";\r\n    import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from \"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js\";\r\n    import { getFirestore, doc, setDoc, getDoc, collection, addDoc, query, where, onSnapshot, updateDoc, getDocs } from \"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js\";\r\n\r\n    // Firebase configuration (MUST MATCH firebase-config.js)\r\n    const firebaseConfig = {\r\n        apiKey: \"AIzaSyCd46DqN40OBl1QHx0mYiAGCo8s6A_CHLI\",\r\n        authDomain: \"nocturnal-49be3.firebaseapp.com\",\r\n        projectId: \"nocturnal-49be3\",\r\n        storageBucket: \"nocturnal-49be3.firebasestorage.app\",\r\n        messagingSenderId: \"1056329690624\",\r\n        appId: \"1:1056329690624:web:a0e2b5a8c1da86c3f1e06a\"\r\n    };\r\n\r\n    // Initialize Firebase\r\n    const app = initializeApp(firebaseConfig);\r\n    const auth = getAuth(app);\r\n    const db = getFirestore(app);\r\n\r\n    // Export to global window object for app.js to use\r\n    window.firebase = {\r\n        auth,\r\n        db,\r\n        onAuthStateChanged,\r\n        createUserWithEmailAndPassword,\r\n        signInWithEmailAndPassword,\r\n        signOut,\r\n        doc,\r\n        setDoc,\r\n        getDoc,\r\n        collection,\r\n        addDoc,\r\n        query,\r\n        where,\r\n        onSnapshot,\r\n        updateDoc,\r\n        getDocs\r\n    };\r\n\r\n    console.log('‚úÖ Firebase initialized successfully');\r\n\r\n    // Simple page navigation functions\r\n    function showPage(pageId) {\r\n        const pages = ['landing-page', 'login-page', 'register-page', 'dashboard'];\r\n        pages.forEach(id => {\r\n            const element = document.getElementById(id);\r\n            if (element) {\r\n                element.style.display = 'none';\r\n            }\r\n        });\r\n        \r\n        const targetPage = document.getElementById(pageId);\r\n        if (targetPage) {\r\n            targetPage.style.display = (pageId === 'landing-page') ? 'flex' : 'block';\r\n        }\r\n    }\r\n\r\n    // Wait for DOM to load\r\n    window.addEventListener('DOMContentLoaded', () => {\r\n        // Navigation event listeners\r\n        const showLoginBtn = document.getElementById('show-login-btn');\r\n        const showRegisterBtn = document.getElementById('show-register-btn');\r\n        const backFromLogin = document.getElementById('back-from-login');\r\n        const backFromRegister = document.getElementById('back-from-register');\r\n        const goToRegister = document.getElementById('go-to-register');\r\n        const goToLogin = document.getElementById('go-to-login');\r\n        const registerRole = document.getElementById('register-role');\r\n\r\n        if (showLoginBtn) showLoginBtn.addEventListener('click', () => showPage('login-page'));\r\n        if (showRegisterBtn) showRegisterBtn.addEventListener('click', () => showPage('register-page'));\r\n        if (backFromLogin) backFromLogin.addEventListener('click', () => showPage('landing-page'));\r\n        if (backFromRegister) backFromRegister.addEventListener('click', () => showPage('landing-page'));\r\n        if (goToRegister) goToRegister.addEventListener('click', () => showPage('register-page'));\r\n        if (goToLogin) goToLogin.addEventListener('click', () => showPage('login-page'));\r\n\r\n        // Role selection handler\r\n        if (registerRole) {\r\n            registerRole.addEventListener('change', (e) => {\r\n                const hospitalField = document.getElementById('hospital-field');\r\n                const specialtyField = document.getElementById('specialty-field');\r\n                \r\n                if (e.target.value === 'admin') {\r\n                    if (hospitalField) hospitalField.style.display = 'block';\r\n                    if (specialtyField) specialtyField.style.display = 'none';\r\n                } else if (e.target.value === 'doctor' || e.target.value === 'nurse') {\r\n                    if (hospitalField) hospitalField.style.display = 'none';\r\n                    if (specialtyField) specialtyField.style.display = 'block';\r\n                } else {\r\n                    if (hospitalField) hospitalField.style.display = 'none';\r\n                    if (specialtyField) specialtyField.style.display = 'none';\r\n                }\r\n            });\r\n        }\r\n\r\n        // Login form handler\r\n        const loginForm = document.getElementById('login-form');\r\n        if (loginForm) {\r\n            loginForm.addEventListener('submit', async (e) => {\r\n                e.preventDefault();\r\n                const email = loginForm['login-email'].value;\r\n                const password = loginForm['login-password'].value;\r\n                const errorEl = document.getElementById('login-error');\r\n\r\n                try {\r\n                    console.log('üîê Attempting login...');\r\n                    await signInWithEmailAndPassword(auth, email, password);\r\n                    // onAuthStateChanged will handle the redirect\r\n                } catch (error) {\r\n                    console.error('‚ùå Login error:', error);\r\n                    if (errorEl) {\r\n                        errorEl.textContent = error.message;\r\n                        errorEl.style.display = 'block';\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Register form handler\r\n        const registerForm = document.getElementById('register-form');\r\n        if (registerForm) {\r\n            registerForm.addEventListener('submit', async (e) => {\r\n                e.preventDefault();\r\n                const name = registerForm['register-name'].value;\r\n                const email = registerForm['register-email'].value;\r\n                const password = registerForm['register-password'].value;\r\n                const role = registerForm['register-role'].value;\r\n                const specialty = registerForm['register-specialty']?.value;\r\n                const hospital = registerForm['register-hospital']?.value;\r\n                const location = registerForm['register-location'].value;\r\n                const errorEl = document.getElementById('register-error');\r\n\r\n                try {\r\n                    console.log('üìù Attempting registration...');\r\n                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n                    const user = userCredential.user;\r\n\r\n                    const userProfile = { name, email, role, location, createdAt: new Date() };\r\n                    if (role === 'admin') userProfile.hospital = hospital;\r\n                    else userProfile.specialty = specialty;\r\n\r\n                    await setDoc(doc(db, \"users\", user.uid), userProfile);\r\n                    console.log('‚úÖ Registration successful');\r\n                    // onAuthStateChanged will handle the redirect\r\n                } catch (error) {\r\n                    console.error('‚ùå Registration error:', error);\r\n                    if (errorEl) {\r\n                        errorEl.textContent = error.message;\r\n                        errorEl.style.display = 'block';\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Authentication state listener\r\n        onAuthStateChanged(auth, async (user) => {\r\n            console.log('üîÑ Auth state changed:', user ? user.email : 'No user');\r\n\r\n            if (user) {\r\n                const userDocRef = doc(db, 'users', user.uid);\r\n                const userDoc = await getDoc(userDocRef);\r\n\r\n                if (userDoc.exists()) {\r\n                    const userData = userDoc.data();\r\n                    const token = await user.getIdToken();\r\n\r\n                    // Save to localStorage\r\n                    localStorage.setItem('token', token);\r\n                    localStorage.setItem('userId', user.uid);\r\n                    localStorage.setItem('userName', userData.name || 'User');\r\n\r\n                    console.log('üë§ User role:', userData.role);\r\n\r\n                    // Redirect based on role\r\n                    if (userData.role === 'doctor' || userData.role === 'nurse') {\r\n                        localStorage.setItem('userType', 'doctor');\r\n                        console.log('üè• Redirecting to doctor dashboard...');\r\n                        window.location.href = 'doctor-dashboard.html';\r\n                    } else if (userData.role === 'admin') {\r\n                        localStorage.setItem('userType', 'hospital');\r\n                        console.log('üè• Showing admin dashboard...');\r\n                        // TODO: Show admin dashboard (currently not implemented in index.html)\r\n                        alert('Admin login successful! Admin dashboard coming soon.');\r\n                    }\r\n                }\r\n            } else {\r\n                // User logged out\r\n                localStorage.clear();\r\n                showPage('landing-page');\r\n            }\r\n        });\r\n\r\n        console.log('‚úÖ Event listeners attached');\r\n    });\r\n</script>\r\n\r\n</body>\r\n</html>"
  }
]