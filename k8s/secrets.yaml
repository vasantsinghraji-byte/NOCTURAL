# IMPORTANT: This is a template file
# DO NOT commit actual secrets to version control
# Use kubectl create secret or a secrets management tool

apiVersion: v1
kind: Secret
metadata:
  name: nocturnal-secrets
  namespace: nocturnal
type: Opaque
stringData:
  # MongoDB connection
  mongodb-uri: "mongodb://user:password@mongodb-service:27017/nocturnal"
  mongo-root-username: "admin"
  mongo-root-password: "CHANGE_ME_IN_PRODUCTION"

  # Redis
  redis-password: "CHANGE_ME_IN_PRODUCTION"

  # Application secrets
  jwt-secret: "CHANGE_ME_IN_PRODUCTION_64_CHARS_MINIMUM"

  # Email credentials (optional)
  smtp-user: "your-email@gmail.com"
  smtp-password: "your-app-password"

---
# Create secrets using kubectl:
# kubectl create secret generic nocturnal-secrets \
#   --from-literal=mongodb-uri='mongodb://...' \
#   --from-literal=jwt-secret='your-secret-key' \
#   --from-literal=redis-password='your-redis-password' \
#   --namespace=nocturnal

# Or use external secrets operator with AWS Secrets Manager / Vault
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: nocturnal-external-secrets
  namespace: nocturnal
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: aws-secrets-manager
    kind: SecretStore
  target:
    name: nocturnal-secrets
    creationPolicy: Owner
  data:
  - secretKey: mongodb-uri
    remoteRef:
      key: nocturnal/mongodb-uri
  - secretKey: jwt-secret
    remoteRef:
      key: nocturnal/jwt-secret
  - secretKey: redis-password
    remoteRef:
      key: nocturnal/redis-password
